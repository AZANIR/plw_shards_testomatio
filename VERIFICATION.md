# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏ Playwright + Testomat.io –∑ Sharding

## ‚úÖ –©–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:

### 1. –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- ‚úÖ `@playwright/test@^1.49.0` (–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ 1.57.0)
- ‚úÖ `@testomatio/reporter@^2.3.8` (–∞–∫—Ç—É–∞–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è)

### 2. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Playwright
- ‚úÖ `playwright.config.ts` –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º —à–ª—è—Ö–æ–º –¥–æ —Ä–µ–ø–æ—Ä—Ç–µ—Ä–∞: `@testomatio/reporter/playwright`
- ‚úÖ –†–µ–ø–æ—Ä—Ç–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î environment variables: `TESTOMATIO`, `TESTOMATIO_RUN`, `TESTOMATIO_PROJECT_ID`
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ sharding —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `--shard`

### 3. GitHub Actions Workflow
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ `.github/workflows/playwright-sharded-testomat.yml`
- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è –∑ 3 shards
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `--shard=${{ matrix.shardIndex }}/${{ matrix.shardTotal }}`
- ‚úÖ Environment variables –¥–ª—è Testomat.io –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ñ–≤ (HTML –∑–≤—ñ—Ç–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤)

### 4. –¢–µ—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ `tests/example.spec.ts` –∑ 6 —Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó sharding
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ `tests/simple.spec.ts` –∑ –ø—Ä–æ—Å—Ç–∏–º —Ç–µ—Å—Ç–æ–º

## ‚ö†Ô∏è –í—ñ–¥–æ–º—ñ –ø—Ä–æ–±–ª–µ–º–∏:

### –õ–æ–∫–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (Windows)
–ú–æ–∂–µ –≤–∏–Ω–∏–∫–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –≤–µ—Ä—Å—ñ–π –∞–±–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞. –¶–µ **–ù–ï –≤–ø–ª–∏–≤–∞—î** –Ω–∞ —Ä–æ–±–æ—Ç—É –≤ GitHub Actions CI/CD.

**–†—ñ—à–µ–Ω–Ω—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
```bash
# –ó–∞–ø—É—Å–∫ –±–µ–∑ —Ä–µ–ø–æ—Ä—Ç–µ—Ä–∞ (–¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–µ—Å—Ç—ñ–≤)
npx playwright test --reporter=list

# –ó–∞–ø—É—Å–∫ –∑ sharding (—Å–∏–º—É–ª—è—Ü—ñ—è CI)
npx playwright test --shard=1/3 --reporter=list
npx playwright test --shard=2/3 --reporter=list
npx playwright test --shard=3/3 --reporter=list
```

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ CI/CD:

### –©–æ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ GitHub Actions:

1. **Sharding –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
   - –ö–æ–∂–µ–Ω shard –æ—Ç—Ä–∏–º–∞—î —Å–≤–æ—é –ø—ñ–¥–º–Ω–æ–∂–∏–Ω—É —Ç–µ—Å—Ç—ñ–≤
   - –¢–µ—Å—Ç–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ Playwright

2. **Testomat.io —Ä–µ–ø–æ—Ä—Ç–µ—Ä –ø—Ä–∞—Ü—é—î:**
   - –†–µ–ø–æ—Ä—Ç–µ—Ä –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è –ø—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ `TESTOMATIO` env variable
   - –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑ —É—Å—ñ—Ö shards –æ–±'—î–¥–Ω–∞—é—Ç—å—Å—è –≤ –æ–¥–∏–Ω run –≤ Testomat.io
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç–æ–π —Å–∞–º–∏–π `TESTOMATIO_RUN` –¥–ª—è –≤—Å—ñ—Ö shards

3. **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è:**
   - HTML –∑–≤—ñ—Ç–∏ –∑ –∫–æ–∂–Ω–æ–≥–æ shard
   - JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤

## üìã –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞:

### –ö—Ä–æ–∫ 1: –î–æ–¥–∞—Ç–∏ —Å–µ–∫—Ä–µ—Ç–∏ –≤ GitHub
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Settings ‚Üí Secrets and variables ‚Üí Actions
2. –î–æ–¥–∞—Ç–∏ `TESTOMATIO` –∑ API –∫–ª—é—á–µ–º Testomat.io
3. (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) –î–æ–¥–∞—Ç–∏ `TESTOMATIO_PROJECT_ID`

### –ö—Ä–æ–∫ 2: Push –∫–æ–¥ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
```bash
git add .
git commit -m "Add Playwright sharding with Testomat.io"
git push
```

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Actions –≤–∫–ª–∞–¥–∫—É GitHub
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ workflow –∑–∞–ø—É—Å—Ç–∏–≤—Å—è
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –≤—Å—ñ 3 shards –≤–∏–∫–æ–Ω–∞–ª–∏—Å—è
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ Testomat.io dashboard

## üîç –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î:

### –í GitHub Actions:
1. ‚úÖ Workflow –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞ push/PR
2. ‚úÖ –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è 3 –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –¥–∂–æ–±–∏ (shard 1/3, 2/3, 3/3)
3. ‚úÖ –ö–æ–∂–µ–Ω –¥–∂–æ–± –≤–∏–∫–æ–Ω—É—î —Å–≤–æ—é –ø—ñ–¥–º–Ω–æ–∂–∏–Ω—É —Ç–µ—Å—Ç—ñ–≤
4. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –≤ Testomat.io
5. ‚úÖ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è

### –í Testomat.io:
1. ‚úÖ –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –æ–¥–∏–Ω run –∑ –Ω–∞–∑–≤–æ—é "Playwright Sharded CI Run - {run_id}"
2. ‚úÖ –í—Å—ñ —Ç–µ—Å—Ç–∏ –∑ —É—Å—ñ—Ö shards –æ–±'—î–¥–Ω–∞–Ω—ñ –≤ –æ–¥–∏–Ω run
3. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è

## üìù –í–∞–∂–ª–∏–≤—ñ –Ω–æ—Ç–∞—Ç–∫–∏:

1. **Sharding:** Playwright –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—î —Ç–µ—Å—Ç–∏ –º—ñ–∂ shards. –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω—ñ—á–æ–≥–æ –¥–æ–¥–∞—Ç–∫–æ–≤–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏.

2. **Testomat.io –æ–±'—î–¥–Ω–∞–Ω–Ω—è:** Testomat.io –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±'—î–¥–Ω—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑ —É—Å—ñ—Ö shards –≤ –æ–¥–∏–Ω run, —è–∫—â–æ:
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç–æ–π —Å–∞–º–∏–π `TESTOMATIO` API –∫–ª—é—á
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç–æ–π —Å–∞–º–∏–π `TESTOMATIO_RUN` (–∞–±–æ –≤–æ–Ω–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –≤ –æ–¥–∏–Ω —á–∞—Å)

3. **–ö—ñ–ª—å–∫—ñ—Å—Ç—å shards:** –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –≤ `.github/workflows/playwright-sharded-testomat.yml`:
   ```yaml
   matrix:
     shardIndex: [1, 2, 3, 4]  # –ó–±—ñ–ª—å—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
     shardTotal: [4]            # –í—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –∑–±—ñ–ª—å—à–∏—Ç–∏
   ```

4. **–õ–æ–∫–∞–ª—å–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞:** –Ø–∫—â–æ –ª–æ–∫–∞–ª—å–Ω–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏, —Ü–µ –Ω–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤ CI –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ. GitHub Actions –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —á–∏—Å—Ç–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ Ubuntu, –¥–µ –≤—Å–µ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ.

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫:

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ CI/CD!**

–í—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ:
- ‚úÖ `package.json` –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏
- ‚úÖ `playwright.config.ts` –∑ Testomat.io —Ä–µ–ø–æ—Ä—Ç–µ—Ä–æ–º
- ‚úÖ `.github/workflows/playwright-sharded-testomat.yml` –∑ sharding
- ‚úÖ –ü—Ä–∏–∫–ª–∞–¥–∏ —Ç–µ—Å—Ç—ñ–≤
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫:** –ö–ª—ñ—î–Ω—Ç –ø–æ–≤–∏–Ω–µ–Ω –¥–æ–¥–∞—Ç–∏ `TESTOMATIO` —Å–µ–∫—Ä–µ—Ç –≤ GitHub —ñ –∑–∞–ø—É—à–∏—Ç–∏ –∫–æ–¥.

